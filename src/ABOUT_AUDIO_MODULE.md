## 사운드 관리 모듈 가이드 (`audio.py`)

### 개요
이 모듈은 게임 내 사운드 및 음악 재생을 관리합니다. Pyxel 엔진의 사운드 기능을 래핑하여 다양한 사운드 관련 기능을 제공합니다.

### 주요 기능

1. **음악 로딩 및 재생**
   - JSON 형식의 음악 데이터 로드
   - 다중 채널 음악 재생 지원
   - 루프 재생 및 시작 틱 지정 가능

2. **효과음 재생**
   - 열거형(`SoundType`)을 통한 효과음 타입 정의
   - 우선순위 기반 효과음 재생 관리
   - 루프 재생 및 우선 재생 옵션 지원

3. **사운드 제어**
   - 음악 및 효과음 재생/중지 기능
   - 음악 볼륨 페이드아웃 기능
   - 사운드 채널 게인 초기화 기능

### 배경 정보

#### 1. 사운드 채널과 게인
- **채널(Channel)**: 사운드를 재생하는 독립적인 경로
- **게인(Gain)**: 사운드의 볼륨을 조절하는 값 (0.0 ~ 1.0)
  - 0.0: 무음
  - 1.0: 최대 볼륨
- Pyxel 엔진에서 사운드 채널은 각각 독립적으로 게인을 설정할 수 있음

#### 2. 사운드 재생 원리
- 사운드 데이터는 미리 정의된 사운드 풀에 로드됨
- `px.play()` 함수를 통해 지정된 채널에서 사운드 재생
- 채널은 동시에 하나의 사운드만 재생 가능

### 사용 방법

#### 1. 음악 재생
```python
from audio import load_music, play_music

# 음악 데이터 로드
music_data = load_music("music_file.json")

# 음악 재생 (기본값: 루프 재생, 4채널 사용)
play_music(music_data)

# 옵션 지정 재생
play_music(music_data, doLoop=False, num_channels=2)
```

#### 2. 효과음 재생
```python
from audio import SoundType, play_sound

# 효과음 재생 (기본값: 비루프, 우선순위 없음)
play_sound(SoundType.BLIP)

# 옵션 지정 재생
play_sound(SoundType.WEAPON_POWERUP, doLoop=True, priority=True)
```

### 주요 개념

1. **사운드 채널**
   - 음악 재생: 채널 0-3 사용
   - 효과음 재생: 채널 3 (`SOUND_CHANNEL`) 전용 사용

2. **효과음 우선순위**
   - `SND_PRIORITY` 딕셔너리로 우선순위 관리
   - 높은 우선순위의 사운드가 재생 중일 때만 새로운 사운드로 대체 가능

3. **게인 제어**
   - `reset_music_gain()`: 채널 게인 초기화
   - `fade_out_music()`: 음악 볼륨 페이드아웃

### 주의사항

1. **채널 수 제한**
   - Pyxel 엔진의 채널 수 제한 (기본 4채널)

2. **동시 재생 제한**
   - 효과음은 `SOUND_CHANNEL`에서 하나만 재생 가능

3. **우선순위 관리**
   - 효과음 재생 시 우선순위를 고려하여 구현

### 추가 정보

1. **음악 데이터 형식**
   - JSON 형식으로 저장
   - 각 채널별 사운드 설정 정보 포함

2. **효과음 타입 관리**
   - `SoundType` 열거형을 통해 효과음 타입 정의 및 관리

3. **우선순위 기반 재생**
   - 효과음 재생 시 우선순위에 따라 재생 여부 결정

4. **게인값 관리**
   - 기본 게인값: `SOUND_CHANNEL_GAIN_DEFAULT` (0.125)
   - 페이드아웃 시 게인값을 점진적으로 감소시켜 구현

이 모듈을 통해 개발자는 게임 내 사운드 및 음악 재생을 효과적으로 관리할 수 있으며, 다양한 사운드 제어 기능을 활용하여 풍부한 오디오 경험을 제공할 수 있습니다.
